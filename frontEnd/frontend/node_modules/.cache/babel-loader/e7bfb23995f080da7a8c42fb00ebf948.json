{"remainingRequest":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\normalUser\\RecordAppearance.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\normalUser\\RecordAppearance.vue","mtime":1633173573153},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1630488426857},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1630488426239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L0RBVEEvcHJvamVjdHMvXHU2NTcwXHU2MzZFXHU1RTkzXHU1QjlFXHU0RTYwL2Zyb250RW5kL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHJlc3BGaWx0ZXIgZnJvbSAiQC9jb21wb25lbnRzL3V0aWxzL3Jlc3BGaWx0ZXIiOwppbXBvcnQgY29uZmlnIGZyb20gIkAvY29uZmlnIjsKaW1wb3J0IGxvY2FsVGltZSBmcm9tICJAL2NvbXBvbmVudHMvdXRpbHMvZ2V0TG9jYWxUaW1lIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZWNvcmRBcHBlYXJhbmNlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0SW5mb0xpc3Q6IFtdLAogICAgICBzZWxlY3RlZENhdElkOiB1bmRlZmluZWQsCiAgICAgIHNlbGVjdGVkQ2F0OiB1bmRlZmluZWQsCiAgICAgIHVwbG9hZEFjdGl2ZTogdHJ1ZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkX3RoaXMkJGh0dHAkcG8sIHJlc3A7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRodHRwLnBvc3QoImdldF9jYXRfYXBwZWFyYW5jZV9saXN0Iik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRfdGhpcyQkaHR0cCRwbyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXNwID0gX3lpZWxkJF90aGlzJCRodHRwJHBvLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKCFyZXNwRmlsdGVyKHJlc3ApKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AubXNnKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ291dCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLmNhdEluZm9MaXN0ID0gcmVzcC5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2VsZWN0ZWRDYXRPbmNoYW5nZTogZnVuY3Rpb24gc2VsZWN0ZWRDYXRPbmNoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnVwbG9hZEFjdGl2ZSA9IHRydWU7CiAgICAgIHZhciByZXQgPSBudWxsOwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDYXRJZCkgewogICAgICAgIHRoaXMuY2F0SW5mb0xpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaWYgKGl0ZW0uY2F0SWQgPT0gX3RoaXMyLnNlbGVjdGVkQ2F0SWQpIHsKICAgICAgICAgICAgdmFyIHVybCA9ICIiLmNvbmNhdChjb25maWcuSHR0cC5iYXNlVXJsKSArICJpbWFnZT9pbWdJZD0iICsgIiIuY29uY2F0KGl0ZW0uY2F0UGhvdG9JZCk7CiAgICAgICAgICAgIHJldCA9IHsKICAgICAgICAgICAgICBpbWd1cmw6IHVybCwKICAgICAgICAgICAgICBsYXN0Rm91bmRUaW1lOiBpdGVtLmxhc3RGaW5kVGltZQogICAgICAgICAgICB9OwogICAgICAgICAgICBfdGhpczIuc2VsZWN0ZWRDYXQgPSByZXQ7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLnNlbGVjdGVkQ2F0ID0gcmV0OwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSwKICAgIGdldExvY2FsVGltZTogZnVuY3Rpb24gZ2V0TG9jYWxUaW1lKCkgewogICAgICByZXR1cm4gbG9jYWxUaW1lKHRoaXMuc2VsZWN0ZWRDYXQubGFzdEZvdW5kVGltZSk7CiAgICB9LAogICAgdXBsb2FkRmluZDogZnVuY3Rpb24gdXBsb2FkRmluZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3lpZWxkJF90aGlzMyQkaHR0cCRwLCByZXNwOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMzLnVwbG9hZEFjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy4kaHR0cC5wb3N0KCIvZmluZF9jYXQiLCBfdGhpczMuc2VsZWN0ZWRDYXRJZCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF95aWVsZCRfdGhpczMkJGh0dHAkcCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgcmVzcCA9IF95aWVsZCRfdGhpczMkJGh0dHAkcC5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BGaWx0ZXIocmVzcCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLmVycm9yKHJlc3AubXNnKTsKCiAgICAgICAgICAgICAgICBfdGhpczMubG9nb3V0KCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLnN1Y2Nlc3MoIueZu+iusOaIkOWKnyIpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmluaXQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF90aGlzMy5zZWxlY3RlZENhdE9uY2hhbmdlKCk7CgogICAgICAgICAgICAgICAgX3RoaXMzLnVwbG9hZEFjdGl2ZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIF90aGlzMy4kZm9yY2VVcGRhdGUoKTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczMpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["RecordAppearance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA,OAAA,UAAA,MAAA,+BAAA;AACA,OAAA,MAAA,MAAA,UAAA;AACA,OAAA,SAAA,MAAA,iCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,kBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,SAFA;AAGA,MAAA,WAAA,EAAA,SAHA;AAIA,MAAA,YAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,IAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,yBAAA,CADA;;AAAA;AAAA;AACA,gBAAA,IADA,yBACA,IADA;;AAEA,oBAAA,CAAA,UAAA,CAAA,IAAA,CAAA,EAAA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;;AACA,kBAAA,KAAA,CAAA,MAAA;AACA;;AACA,gBAAA,KAAA,CAAA,WAAA,GAAA,IAAA,CAAA,IAAA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,KARA;AASA,IAAA,mBATA,iCASA;AAAA;;AACA,WAAA,YAAA,GAAA,IAAA;AACA,UAAA,GAAA,GAAA,IAAA;;AACA,UAAA,KAAA,aAAA,EAAA;AACA,aAAA,WAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,KAAA,IAAA,MAAA,CAAA,aAAA,EAAA;AACA,gBAAA,GAAA,GACA,UAAA,MAAA,CAAA,IAAA,CAAA,OAAA,IAAA,cAAA,aAAA,IAAA,CAAA,UAAA,CADA;AAEA,YAAA,GAAA,GAAA;AAAA,cAAA,MAAA,EAAA,GAAA;AAAA,cAAA,aAAA,EAAA,IAAA,CAAA;AAAA,aAAA;AACA,YAAA,MAAA,CAAA,WAAA,GAAA,GAAA;AACA;AACA;AACA,SARA;AASA,aAAA,WAAA,GAAA,GAAA;AACA;AACA;AACA,KAzBA;AA0BA,IAAA,YA1BA,0BA0BA;AACA,aAAA,SAAA,CAAA,KAAA,WAAA,CAAA,aAAA,CAAA;AACA,KA5BA;AA6BA,IAAA,UA7BA,wBA6BA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,YAAA,GAAA,KAAA;AADA;AAAA,uBAEA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA,EAAA,MAAA,CAAA,aAAA,CAFA;;AAAA;AAAA;AAEA,gBAAA,IAFA,yBAEA,IAFA;AAGA,gBAAA,OAAA,CAAA,GAAA,CAAA,IAAA;;AAHA,oBAIA,UAAA,CAAA,IAAA,CAJA;AAAA;AAAA;AAAA;;AAKA,gBAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;;AACA,gBAAA,MAAA,CAAA,MAAA;;AANA;;AAAA;AASA,gBAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;;AATA;AAAA,uBAUA,MAAA,CAAA,IAAA,EAVA;;AAAA;AAWA,gBAAA,MAAA,CAAA,mBAAA;;AACA,gBAAA,MAAA,CAAA,YAAA,GAAA,KAAA;;AACA,gBAAA,MAAA,CAAA,YAAA;;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA;;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AA5CA;AAbA,CAAA","sourcesContent":["<script src=\"../utils/auth.js\"></script>\n<template>\n  <div>\n    <div>\n      <!--  面包屑导航区-->\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n        <el-breadcrumb-item>普通用户</el-breadcrumb-item>\n        <el-breadcrumb-item>记录猫猫出现</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n\n    <el-card>\n      <el-row type=\"flex\" justify=\"space-between\" class=\"marginTop\">\n        <el-col :span=\"6\"></el-col>\n        <el-col :span=\"6\">\n          <el-select\n            v-model=\"selectedCatId\"\n            filterable\n            placeholder=\"请选择\"\n            @change=\"selectedCatOnchange\"\n          >\n            <el-option\n              v-for=\"cat in catInfoList\"\n              :key=\"cat.value\"\n              :label=\"cat.catName\"\n              :value=\"cat.catId\"\n            >\n            </el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"6\"></el-col>\n      </el-row>\n      <el-row type=\"flex\" justify=\"space-between\" class=\"marginTop\">\n        <el-col :span=\"6\"></el-col>\n        <el-col :span=\"6\">\n          <img\n            v-if=\"selectedCat\"\n            :src=\"selectedCat.imgurl\"\n            alt=\"暂无图片\"\n            class=\"avoid-shake-max-width\"\n          />\n          <h1 v-else>选择猫猫以进一步操作</h1>\n        </el-col>\n        <el-col :span=\"6\"></el-col>\n      </el-row>\n      <el-row v-if=\"selectedCat\" type=\"flex\" justify=\"space-between\" class=\"marginTop\">\n        <el-col :span=\"6\"\n          >上次记录出现时间: {{ getLocalTime() }}</el-col\n        >\n        <el-col :span=\"6\"\n        >\n\n            点击上传这次的发现 :\n          <el-button v-if=\"uploadActive\" type=\"primary\" icon=\"el-icon-top\" circle @click=\"uploadFind\"></el-button>\n          <el-button v-else type=\"success\" icon=\"el-icon-check\" circle disabled></el-button>\n\n        </el-col\n        >\n        <el-col :span=\"6\"></el-col>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport respFilter from \"@/components/utils/respFilter\";\nimport config from \"@/config\";\nimport localTime from \"@/components/utils/getLocalTime\";\n\nexport default {\n  name: \"RecordAppearance\",\n  data() {\n    return {\n      catInfoList: [],\n      selectedCatId: undefined,\n      selectedCat: undefined,\n      uploadActive:true,\n    };\n  },\n  created() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      let { data: resp } = await this.$http.post(\"get_cat_appearance_list\");\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n      }\n      this.catInfoList = resp.data;\n    },\n    selectedCatOnchange() {\n      this.uploadActive=true;\n      let ret = null;\n      if (this.selectedCatId) {\n        this.catInfoList.forEach((item) => {\n          if (item.catId == this.selectedCatId) {\n            let url =\n              `${config.Http.baseUrl}` + \"image?imgId=\" + `${item.catPhotoId}`;\n            ret = { imgurl: url, lastFoundTime: item.lastFindTime };\n            this.selectedCat = ret;\n            return;\n          }\n        });\n        this.selectedCat = ret;\n        return;\n      }\n    },\n    getLocalTime(){\n      return localTime(this.selectedCat.lastFoundTime)\n    },\n    async uploadFind(){\n      this.uploadActive=false;\n      const { data: resp } = await this.$http.post(\"/find_cat\",this.selectedCatId);\n      console.log(resp);\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n        return;\n      }\n      this.$message.success(\"登记成功\");\n      await this.init();\n      this.selectedCatOnchange();\n      this.uploadActive=false;\n      this.$forceUpdate();\n      console.log(this);\n    }\n  },\n};\n</script>\n\n<style scoped>\n.marginTop {\n  margin-top: 5vh !important;\n}\n.avoid-shake-max-width {\n  width: 99%;\n}\n</style>\n"],"sourceRoot":"src/components/normalUser"}]}