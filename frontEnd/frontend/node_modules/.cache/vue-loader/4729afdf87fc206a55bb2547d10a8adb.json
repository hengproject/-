{"remainingRequest":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\normalUser\\EditInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\normalUser\\EditInformation.vue","mtime":1631884210956},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1630488426857},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1630488426239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkZWVwY2xvbmUgZnJvbSAiQC9jb21wb25lbnRzL3V0aWxzL2RlZXBjbG9uZSI7CmltcG9ydCByZXNwRmlsdGVyIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9yZXNwRmlsdGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJFZGl0SW5mb3JtYXRpb24iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlZGl0RGF0YUZvcm06IHt9LAogICAgICBlZGl0RGF0YToge30sCiAgICAgIHNob3dQYXNzd29yZDogZmFsc2UsCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZWRpdEZvcm1SdWxlczogewogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICB7IG1pbjogNiwgbWF4OiAzMCwgbWVzc2FnZTogIumVv+W6puWcqDYtMzDkuYvpl7QiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIHN0YWZmTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeaTjeS9nOWRmOWnk+WQjSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgeyBtaW46IDIsIG1heDogMzAsIG1lc3NhZ2U6ICLplb/luqblnKgyLTMw5LmL6Ze0IiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRFZGl0VXNlckRhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ291dCgpIHsKICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0sCiAgICBhc3luYyBnZXRFZGl0VXNlckRhdGEoKSB7CiAgICAgIGxldCB7IGRhdGE6IHJlc3AgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgiL25vcm1hbF91c2VyX2dldF9lZGl0X2RhdGEiKTsKICAgICAgaWYgKCFyZXNwRmlsdGVyKHJlc3ApKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLm1zZyk7CiAgICAgICAgdGhpcy5sb2dvdXQoKTsKICAgICAgfQogICAgICB0aGlzLmVkaXREYXRhID0gZGVlcGNsb25lKHJlc3AuZGF0YSk7CiAgICAgIHRoaXMuZWRpdERhdGFGb3JtID0gZGVlcGNsb25lKHJlc3AuZGF0YSk7CiAgICB9LAogICAgYXN5bmMgZWRpdERhdGFGb3JtQ29tbWl0KCkgewogICAgICBsZXQgeyBkYXRhOiByZXNwIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAgICAgIi9ub3JtYWxfdXNlcl9lZGl0X3VzZXJfZGF0YSIsCiAgICAgICAgdGhpcy5lZGl0RGF0YUZvcm0KICAgICAgKTsKICAgICAgaWYgKCFyZXNwRmlsdGVyKHJlc3ApKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwLm1zZyk7CiAgICAgICAgdGhpcy5sb2dvdXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgfQogICAgICBhd2FpdCB0aGlzLmdldEVkaXRVc2VyRGF0YSgpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["EditInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditInformation.vue","sourceRoot":"src/components/normalUser","sourcesContent":["<template>\n  <div>\n    <el-breadcrumb separator=\"/\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>普通用户菜单</el-breadcrumb-item>\n      <el-breadcrumb-item>修改账户信息</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <el-card>\n      <!--      修改用户信息-->\n      <el-row type=\"flex\" justify=\"end\">\n        <el-col :span=\"6\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            @click=\"editDialogVisible = true\"\n            >修改用户信息</el-button\n          >\n        </el-col>\n      </el-row>\n      <!--      展现用户信息-->\n      <el-row type=\"flex\" justify=\"space-between\">\n        <el-col :span=\"7\" class=\"label\"\n          ><div><p>姓名</p></div></el-col\n        >\n        <el-col :span=\"17\"\n          ><div class=\"content\">\n            <p>{{ this.editData.staffName }}</p>\n          </div></el-col\n        >\n      </el-row>\n      <el-row type=\"flex\" justify=\"space-between\">\n        <el-col :span=\"7\" class=\"label\"\n          ><div><p>密码</p></div></el-col\n        >\n        <el-col :span=\"17\"\n          ><div class=\"content\" @click=\"showPassword = !showPassword\">\n            <p>{{ showPassword ? this.editData.password : \"点击显示密码\" }}</p>\n          </div></el-col\n        >\n      </el-row>\n      <el-row type=\"flex\" justify=\"space-between\">\n        <el-col :span=\"7\" class=\"label\"\n          ><div><p>性别</p></div></el-col\n        >\n        <el-col :span=\"17\"\n          ><div class=\"content\">\n            <p>{{ this.editData.staffSex == 0 ? \"男\" : \"女\" }}</p>\n          </div></el-col\n        >\n      </el-row>\n      <el-row type=\"flex\" justify=\"space-between\">\n        <el-col :span=\"7\" class=\"label\"\n          ><div><p>年龄</p></div></el-col\n        >\n        <el-col :span=\"17\"\n          ><div class=\"content\">\n            <p>{{ this.editData.staffAge }}</p>\n          </div></el-col\n        >\n      </el-row>\n      <el-row type=\"flex\" justify=\"space-between\">\n        <el-col :span=\"7\" class=\"label\"\n          ><div><p>电话号码</p></div></el-col\n        >\n        <el-col :span=\"17\"\n          ><div class=\"content\">\n            <p>{{ this.editData.phoneNum }}</p>\n          </div></el-col\n        >\n      </el-row>\n      <el-row type=\"flex\" justify=\"space-between\">\n        <el-col :span=\"7\" class=\"label\"\n          ><div><p>qq号码</p></div></el-col\n        >\n        <el-col :span=\"17\"\n          ><div class=\"content\">\n            <p>{{ this.editData.qq }}</p>\n          </div></el-col\n        >\n      </el-row>\n    </el-card>\n    <el-dialog title=\"修改信息\" :visible.sync=\"editDialogVisible\" width=\"30%\">\n      <el-form :model=\"editDataForm\" ref=\"editFormRef\" :rules=\"editFormRules\">\n        <el-form-item label=\"姓名\" prop=\"staffName\">\n          <el-input\n            v-model=\"editDataForm.staffName\"\n            placeholder=\"请输入用户名\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input\n            v-model=\"editDataForm.password\"\n            placeholder=\"请输入密码\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" prop=\"staffSex\">\n          <el-select v-model=\"editDataForm.staffSex\">\n            <el-option label=\"男\" value=\"0\"></el-option>\n            <el-option label=\"女\" value=\"1\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"qq\" prop=\"qq\">\n          <el-input\n            v-model=\"editDataForm.qq\"\n            placeholder=\"请输入用户名\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"电话号\" prop=\"phoneNum\">\n          <el-input\n            v-model=\"editDataForm.phoneNum\"\n            placeholder=\"请输入用户名\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editDataFormCommit\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport deepclone from \"@/components/utils/deepclone\";\nimport respFilter from \"@/components/utils/respFilter\";\nexport default {\n  name: \"EditInformation\",\n  data() {\n    return {\n      editDataForm: {},\n      editData: {},\n      showPassword: false,\n      editDialogVisible: false,\n      editFormRules: {\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          { min: 6, max: 30, message: \"长度在6-30之间\", trigger: \"blur\" },\n        ],\n        staffName: [\n          { required: true, message: \"请输入操作员姓名\", trigger: \"blur\" },\n          { min: 2, max: 30, message: \"长度在2-30之间\", trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  created() {\n    this.getEditUserData();\n  },\n  methods: {\n    logout() {\n      window.sessionStorage.clear();\n      this.$router.push(\"/login\");\n    },\n    async getEditUserData() {\n      let { data: resp } = await this.$http.post(\"/normal_user_get_edit_data\");\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n      }\n      this.editData = deepclone(resp.data);\n      this.editDataForm = deepclone(resp.data);\n    },\n    async editDataFormCommit() {\n      let { data: resp } = await this.$http.post(\n        \"/normal_user_edit_user_data\",\n        this.editDataForm\n      );\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n      } else {\n        this.$message.success(\"修改成功\");\n        this.editDialogVisible = false;\n      }\n      await this.getEditUserData();\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.label {\n  text-align: center;\n  background: rgb(250, 250, 250);\n}\n.content {\n  background: rgb(255, 255, 255);\n  text-align: center;\n}\n</style>\n"]}]}