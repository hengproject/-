{"remainingRequest":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\manager\\CatInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\manager\\CatInfo.vue","mtime":1632902125858},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1630488426857},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1630488426239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXNwRmlsdGVyIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9yZXNwRmlsdGVyIjsKaW1wb3J0IGNvbmZpZyBmcm9tICJAL2NvbmZpZyI7CmltcG9ydCBjb3B5UHJvcGVydGllcyBmcm9tICJAL2NvbXBvbmVudHMvdXRpbHMvY29weVByb3BlcnRpZXMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDYXRJbmZvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGljdHVyZVVwbG9hZEFkZHI6IGNvbmZpZy5IdHRwLmJhc2VVcmwgKyAiL21hbmFnZXJfdXBsb2FkX2ZpbGUiLAogICAgICBjYXRMaXN0OiBbXSwKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgcXVlcnk6ICIiLAogICAgICAgIHBhZ2VOdW06IDAsCiAgICAgICAgcGFnZVNpemU6IDIsCiAgICAgIH0sCiAgICAgIHRvdGFsOiAwLAogICAgICBjb25maWcsCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZWRpdEZvcm06IHsKICAgICAgICBjYXRJZDogLTEsCiAgICAgICAgY2F0QWdlOiAtMSwKICAgICAgICBjYXROYW1lOiAiLTEiLAogICAgICAgIGNhdFBob3RvSWQ6IG51bGwsCiAgICAgICAgY2F0UmVtYXJrOiAiLTEiLAogICAgICAgIGNhdFNleDogLTEsCiAgICAgICAgY2F0U3RhdHVzOiAiLTEiLAogICAgICAgIGNhbXB1c0lkOiAiLTEiLAogICAgICAgIGFyZWFJZDogLTEsCiAgICAgICAgY2F0UGhvdG9TcmM6IG51bGwsCiAgICAgICAgcGhvdG9BZGRyOiBudWxsLAogICAgICAgIGFyZWFJZFRlbXA6IG51bGwsCiAgICAgIH0sCiAgICAgIGNhbXB1c0Zvcm06IFtdLAogICAgICBhcmVhRm9ybTogW10sCiAgICAgIHVwbG9hZEVkaXRGb3JtOiB7CiAgICAgICAgY2F0SWQ6ICItMSIsCiAgICAgICAgY2F0QWdlOiAtMSwKICAgICAgICBjYXROYW1lOiAiLTEiLAogICAgICAgIGNhdFJlbWFyazogIi0xIiwKICAgICAgICBjYXRTZXg6IC0xLAogICAgICAgIGNhdFN0YXR1czogIi0xIiwKICAgICAgICBjYW1wdXNJZDogIi0xIiwKICAgICAgICBhcmVhSWQ6IC0xLAogICAgICB9LAogICAgICBhZGRDYXREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDYXRMaXN0KCk7CiAgICB0aGlzLmdldEFyZWFGb3JtTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TG9jYWxUaW1lKG5TKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUludChuUykpLnRvTG9jYWxlU3RyaW5nKCkucmVwbGFjZSgvOlxkezEsMn0kLywgIiAiKTsKICAgIH0sCiAgICBhc3luYyBnZXRDYXRMaXN0KCkgewogICAgICBsZXQgeyBkYXRhOiByZXNwIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAgICAgIi9nZXRfY2F0X2luZm9ybWF0aW9uIiwKICAgICAgICB0aGlzLnF1ZXJ5SW5mbwogICAgICApOwogICAgICBpZiAoIXJlc3BGaWx0ZXIocmVzcCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AubXNnKTsKICAgICAgICB0aGlzLmxvZ291dCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmNhdExpc3QgPSByZXNwLmRhdGEudTsKICAgICAgdGhpcy50b3RhbCA9IHJlc3AuZGF0YS52OwogICAgfSwKICAgIC8v55uR5ZCscGFnZXNpemXmlLnlj5gKICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3UGFnZVNpemUpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZVNpemUgPSBuZXdQYWdlU2l6ZTsKICAgICAgdGhpcy5nZXRDYXRMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShuZXdQYWdlTnVtKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VOdW0gPSBuZXdQYWdlTnVtIC0gMTsKICAgICAgdGhpcy5nZXRDYXRMaXN0KCk7CiAgICB9LAogICAgYXN5bmMgZ2V0QXJlYUZvcm1MaXN0KCkgewogICAgICBsZXQgeyBkYXRhOiByZXNwIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAgICAgIi9tYW5hZ2VyX2dldF9iYXNpY19pbmZvX2xpc3QiCiAgICAgICk7CiAgICAgIGlmICghcmVzcEZpbHRlcihyZXNwKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5tc2cpOwogICAgICAgIHRoaXMubG9nb3V0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuY2FtcHVzRm9ybSA9IHJlc3AuZGF0YS5jYW1wdXNMaXN0OwogICAgfSwKICAgIHNob3dFZGl0RGlhbG9nKHJvdykgewogICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5lZGl0Rm9ybSA9IHJvdzsKICAgICAgdGhpcy5lZGl0Rm9ybS5jYW1wdXNJZCArPSAiIjsKICAgICAgdGhpcy5lZGl0Rm9ybS5hcmVhSWRUZW1wID0gcm93LmFyZWFJZDsKICAgICAgdGhpcy5lZGl0Q2FtcHVzQ2hhbmdlKCk7IC8vdG9kbzrmj5DkuqTml7blgJnliKvlv5jkuoblpoLmnpzkuLrnqboKICAgICAgdGhpcy5nZXRFZGl0UGhvdG9BZGRyKCk7CgogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgfSwKICAgIGFzeW5jIHN1Ym1pdEVkaXRGb3JtKCkgewogICAgICBpZiAoIXRoaXMuZWRpdEZvcm0uYXJlYUlkKQogICAgICAgIHRoaXMuZWRpdEZvcm0uYXJlYUlkID0gdGhpcy5lZGl0Rm9ybS5hcmVhSWRUZW1wOwogICAgICBjb3B5UHJvcGVydGllcyh0aGlzLmVkaXRGb3JtLCB0aGlzLnVwbG9hZEVkaXRGb3JtKTsKICAgICAgdGhpcy4kcmVmcy51cGxvYWRDYXRQaWN0dXJlUmVmLnN1Ym1pdCgpOwogICAgICBsZXQgeyBkYXRhOiByZXNwRm9ybSB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KAogICAgICAgICIvbWFuYWdlcl9tb2RpZnlfY2F0X2luZm8iLAogICAgICAgIHRoaXMudXBsb2FkRWRpdEZvcm0KICAgICAgKTsKICAgICAgaWYgKCFyZXNwRmlsdGVyKHJlc3BGb3JtKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcEZvcm0ubXNnKTsKICAgICAgICB0aGlzLmxvZ291dCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICB0aGlzLmVkaXREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0Q2F0TGlzdCgpOwogICAgfSwKICAgIG9uQ2hhbmdlKGZpbGUpIHsKICAgICAgdGhpcy5lZGl0Rm9ybS5jYXRQaG90b1NyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5yYXcpOwogICAgICB0aGlzLmdldEVkaXRQaG90b0FkZHIoKTsKICAgIH0sCiAgICBnZXRFZGl0UGhvdG9BZGRyKCkgewogICAgICBpZiAodGhpcy5lZGl0Rm9ybS5jYXRQaG90b1NyYykKICAgICAgICB0aGlzLmVkaXRGb3JtLnBob3RvQWRkciA9IHRoaXMuZWRpdEZvcm0uY2F0UGhvdG9TcmM7CiAgICAgIGVsc2UKICAgICAgICB0aGlzLmVkaXRGb3JtLnBob3RvQWRkciA9CiAgICAgICAgICBgJHtjb25maWcuSHR0cC5iYXNlVXJsfWAgKwogICAgICAgICAgImltYWdlP2ltZ0lkPSIgKwogICAgICAgICAgYCR7dGhpcy5lZGl0Rm9ybS5jYXRQaG90b0lkfWA7CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICB9LAogICAgYXN5bmMgZWRpdENhbXB1c0NoYW5nZSgpIHsKICAgICAgdGhpcy5lZGl0Rm9ybS5hcmVhSWQgPSB1bmRlZmluZWQ7CiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEFyZWFGb3JtKCk7CiAgICB9LAogICAgYXN5bmMgcmVmcmVzaEFyZWFGb3JtKCkgewogICAgICBsZXQgeyBkYXRhOiByZXNwIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAgICAgIi9tYW5hZ2VyX2dldF9iYXNpY19pbmZvX2xpc3RfbGF6eV9nZXRfYXJlYSIsCiAgICAgICAgdGhpcy5lZGl0Rm9ybS5jYW1wdXNJZAogICAgICApOwogICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpOwogICAgICB0aGlzLmFyZWFGb3JtID0gcmVzcC5kYXRhOwogICAgICB0aGlzLmFyZWFGb3JtLmZvckVhY2goKGFyZWEpID0+IHsKICAgICAgICBhcmVhLmNhbXB1c0lkID0gYXJlYS5jYW1wdXNJZC5zcGxpdCgiLiIpWzFdOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0QXJlYUNoYW5nZSgpIHsKICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgIH0sCiAgICBzaG93QWRkRGlhbG9nKCkgewogICAgICB0aGlzLmFkZENhdERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmVkaXRGb3JtID0gewogICAgICAgIGNhdElkOiAi55Sx5ZCO5Y+w6Ieq5Yqo55Sf5oiQIiwKICAgICAgICBjYXRBZ2U6IG51bGwsCiAgICAgICAgY2F0TmFtZTogbnVsbCwKICAgICAgICBjYXRQaG90b0lkOiBudWxsLAogICAgICAgIGNhdFJlbWFyazogbnVsbCwKICAgICAgICBjYXRTZXg6IG51bGwsCiAgICAgICAgY2F0U3RhdHVzOiBudWxsLAogICAgICAgIGNhbXB1c0lkOiBudWxsLAogICAgICAgIGFyZWFJZDogbnVsbCwKICAgICAgICBjYXRQaG90b1NyYzogbnVsbCwKICAgICAgICBwaG90b0FkZHI6IG51bGwsCiAgICAgICAgYXJlYUlkVGVtcDogbnVsbCwKICAgICAgfTsKICAgIH0sCiAgICBhc3luYyBzdWJtaXRBZGRGb3JtKCkgewogICAgICBpZiAoIXRoaXMuZWRpdEZvcm0uYXJlYUlkKQogICAgICAgIHRoaXMuZWRpdEZvcm0uYXJlYUlkID0gdGhpcy5lZGl0Rm9ybS5hcmVhSWRUZW1wOwogICAgICBjb3B5UHJvcGVydGllcyh0aGlzLmVkaXRGb3JtLCB0aGlzLnVwbG9hZEVkaXRGb3JtKTsKICAgICAgdGhpcy51cGxvYWRFZGl0Rm9ybS5hcmVhSWQ9bnVsbDsKICAgICAgbGV0IHsgZGF0YTogcmVzcEZvcm0gfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgKICAgICAgICAiL21hbmFnZXJfYWRkX2NhdF9pbmZvIiwKICAgICAgICB0aGlzLnVwbG9hZEVkaXRGb3JtCiAgICAgICk7CiAgICAgIGlmICghcmVzcEZpbHRlcihyZXNwRm9ybSkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BGb3JtLm1zZyk7CiAgICAgICAgdGhpcy5sb2dvdXQoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy51cGxvYWRDYXRQaWN0dXJlUmVmLnN1Ym1pdCgpOwogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICB0aGlzLmFkZENhdERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5nZXRDYXRMaXN0KCk7CiAgICB9LAogICAgYXN5bmMgZGVsZXRlQ2F0KHJvdyl7CiAgICAgIGxldCB7IGRhdGE6IHJlc3AgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgiL21hbmFnZXJfZGVsZXRlX2NhdF9pbmZvIixyb3cuY2F0SWQpOwogICAgICBpZiAoIXJlc3BGaWx0ZXIocmVzcCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AubXNnKTsKICAgICAgICB0aGlzLmxvZ291dCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB0aGlzLmdldENhdExpc3QoKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["CatInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmSA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CatInfo.vue","sourceRoot":"src/components/manager","sourcesContent":["<template>\n  <div>\n    <el-breadcrumb separator=\"/\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>管理员菜单</el-breadcrumb-item>\n      <el-breadcrumb-item>猫猫档案</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <el-card>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"7\">\n          <el-button type=\"primary\" @click=\"showAddDialog\"\n            >添加猫咪信息</el-button\n          >\n        </el-col>\n      </el-row>\n      <el-table :data=\"catList\" border stripe>\n        <el-table-column label=\"主要信息\" align=\"center\">\n          <el-table-column label=\"照片\">\n            <template #default=\"scope\" :config=\"config\">\n              <img\n                :src=\"\n                  `${config.Http.baseUrl}` +\n                  'image?imgId=' +\n                  `${scope.row.catPhotoId}`\n                \"\n                style=\"width: 100%\"\n                v-if=\"scope.row.catPhotoId\"\n              />\n            </template>\n          </el-table-column>\n          <el-table-column label=\"ID\" prop=\"catId\"></el-table-column>\n          <el-table-column label=\"猫名\" prop=\"catName\"></el-table-column>\n          <el-table-column label=\"猫性别\">\n            <template #default=\"scope\">\n              {{ scope.row.catSex == 0 ? \"雄\" : \"雌\" }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"猫状态\" prop=\"catStatus\"></el-table-column>\n          <el-table-column label=\"备注\" prop=\"catRemark\"></el-table-column>\n        </el-table-column>\n\n        <el-table-column label=\"记录\" align=\"center\">\n          <el-table-column label=\"校区\" prop=\"campusName\"></el-table-column>\n          <el-table-column label=\"区域\" prop=\"areaName\"></el-table-column>\n        </el-table-column>\n        <el-table-column label=\"时间\" align=\"center\">\n          <el-table-column label=\"最后发现时间\">\n            <template #default=\"scope\" :getLocalTime=\"this.getLocalTime\">\n              {{ getLocalTime(scope.row.lastFindTime) }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"修改时间\">\n            <template #default=\"scope\" :getLocalTime=\"this.getLocalTime\">\n              {{ getLocalTime(scope.row.updateTime) }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\">\n            <template #default=\"scope\" :getLocalTime=\"this.getLocalTime\">\n              {{ getLocalTime(scope.row.createTime) }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button-group>\n                <el-tooltip\n                  class=\"item\"\n                  effect=\"dark\"\n                  content=\"修改猫咪信息\"\n                  placement=\"top\"\n                  :enterable=\"false\"\n                >\n                  <el-button\n                    type=\"primary\"\n                    icon=\"el-icon-edit\"\n                    size=\"mini\"\n                    @click=\"showEditDialog(scope.row)\"\n                  ></el-button\n                ></el-tooltip>\n                <el-tooltip\n                  class=\"item\"\n                  effect=\"dark\"\n                  content=\"删除该用户(包括员工信息)\"\n                  placement=\"top\"\n                  :enterable=\"false\"\n                >\n                  <el-button\n                    type=\"danger\"\n                    icon=\"el-icon-delete\"\n                    size=\"mini\"\n                    @click=\"deleteCat(scope.row)\"\n                  ></el-button\n                ></el-tooltip>\n              </el-button-group>\n            </template>\n          </el-table-column>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"queryInfo.pageNum + 1\"\n        :page-sizes=\"[2, 3, 5, 10]\"\n        :page-size=\"queryInfo.pageSize\"\n        :total=\"total\"\n        layout=\"total,sizes, prev, pager, next, jumper\"\n      >\n      </el-pagination>\n    </el-card>\n\n    <!--    修改动物信息对话框-->\n    <el-drawer title=\"修改信息\" :visible.sync=\"editDialogVisible\" size=\"67%\">\n      <!--      内容主题区-->\n\n      <el-form :model=\"editForm\" ref=\"editFormRef\" class=\"drawer-form\">\n        <el-form-item label=\"ID\">\n          <el-input v-model=\"editForm.catId\" :disabled=\"true\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"照片\">\n          <br />\n          <el-upload\n            class=\"form-upload\"\n            ref=\"uploadCatPictureRef\"\n            :action=\"pictureUploadAddr\"\n            :auto-upload=\"false\"\n            :data=\"{ catId: editForm.catId }\"\n            :on-change=\"onChange\"\n            :show-file-list=\"false\"\n          >\n            <img\n              v-if=\"editForm.catPhotoSrc || editForm.catPhotoId\"\n              :src=\"this.editForm.photoAddr\"\n              style=\"width: 100%\"\n            />\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"名字\" prop=\"catName\">\n          <el-input\n            v-model=\"editForm.catName\"\n            placeholder=\"请输入名称\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" prop=\"catSex\">\n          <br />\n          <el-select v-model=\"editForm.catSex\">\n            <el-option label=\"雄性\" :value=\"0\"></el-option>\n            <el-option label=\"雌性\" :value=\"1\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"年龄\" prop=\"catAge\">\n          <el-input\n            v-model=\"editForm.catAge\"\n            placeholder=\"请输入年龄\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"catRemark\">\n          <el-input\n            v-model=\"editForm.catRemark\"\n            placeholder=\"请输入备注\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"catStatus\">\n          <el-input\n            v-model=\"editForm.catStatus\"\n            placeholder=\"请输入当前状态\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"校区\">\n          <br />\n          <el-select @change=\"editCampusChange\" v-model=\"editForm.campusId\">\n            <el-option\n              :key=\"campus.campusId\"\n              :label=\"campus.campusName\"\n              :value=\"campus.campusId\"\n              v-for=\"campus in campusForm\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"活动区域\">\n          <br />\n          <el-select v-model=\"editForm.areaId\" :placeholder=\"editForm.areaName\">\n            <el-option\n              :key=\"area.campusId\"\n              :label=\"area.campusName\"\n              :value=\"area.campusId\"\n              v-for=\"area in areaForm\"\n              @change=\"editAreaChange\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n\n      <span class=\"drawer-button-group\">\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitEditForm\">确 定</el-button>\n      </span>\n    </el-drawer>\n\n    <!--    添加动物信息对话框-->\n    <el-drawer title=\"增加信息\" :visible.sync=\"addCatDialogVisible\" size=\"67%\">\n      <!--      内容主题区-->\n\n      <el-form :model=\"editForm\" ref=\"addFormRef\" class=\"drawer-form\">\n        <el-form-item label=\"ID\">\n          <el-input v-model=\"editForm.catId\" :disabled=\"true\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"照片\">\n          <br />\n          <el-upload\n            class=\"form-upload\"\n            ref=\"uploadCatPictureRef\"\n            :action=\"pictureUploadAddr\"\n            :auto-upload=\"false\"\n            :data=\"{ catId: editForm.catId }\"\n            :on-change=\"onChange\"\n            :show-file-list=\"false\"\n          >\n            <img\n              v-if=\"editForm.catPhotoSrc || editForm.catPhotoId\"\n              :src=\"this.editForm.photoAddr\"\n              style=\"width: 100%\"\n            />\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"名字\" prop=\"catName\">\n          <el-input\n            v-model=\"editForm.catName\"\n            placeholder=\"请输入名称\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" prop=\"catSex\">\n          <br />\n          <el-select v-model=\"editForm.catSex\">\n            <el-option label=\"雄性\" :value=\"0\"></el-option>\n            <el-option label=\"雌性\" :value=\"1\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"年龄\" prop=\"catAge\">\n          <el-input\n            v-model=\"editForm.catAge\"\n            placeholder=\"请输入年龄\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"catRemark\">\n          <el-input\n            v-model=\"editForm.catRemark\"\n            placeholder=\"请输入备注\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"catStatus\">\n          <el-input\n            v-model=\"editForm.catStatus\"\n            placeholder=\"请输入当前状态\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"校区\">\n          <br />\n          <el-select @change=\"editCampusChange\" v-model=\"editForm.campusId\">\n            <el-option\n              :key=\"campus.campusId\"\n              :label=\"campus.campusName\"\n              :value=\"campus.campusId\"\n              v-for=\"campus in campusForm\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"活动区域\">\n          <br />\n          <el-select v-model=\"editForm.areaId\" :placeholder=\"editForm.areaName\">\n            <el-option\n              :key=\"area.campusId\"\n              :label=\"area.campusName\"\n              :value=\"area.campusId\"\n              v-for=\"area in areaForm\"\n              @change=\"editAreaChange\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n\n      <span class=\"drawer-button-group\">\n        <el-button @click=\"addCatDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitAddForm\">确 定</el-button>\n      </span>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport respFilter from \"@/components/utils/respFilter\";\nimport config from \"@/config\";\nimport copyProperties from \"@/components/utils/copyProperties\";\n\nexport default {\n  name: \"CatInfo\",\n  data() {\n    return {\n      pictureUploadAddr: config.Http.baseUrl + \"/manager_upload_file\",\n      catList: [],\n      queryInfo: {\n        query: \"\",\n        pageNum: 0,\n        pageSize: 2,\n      },\n      total: 0,\n      config,\n      editDialogVisible: false,\n      editForm: {\n        catId: -1,\n        catAge: -1,\n        catName: \"-1\",\n        catPhotoId: null,\n        catRemark: \"-1\",\n        catSex: -1,\n        catStatus: \"-1\",\n        campusId: \"-1\",\n        areaId: -1,\n        catPhotoSrc: null,\n        photoAddr: null,\n        areaIdTemp: null,\n      },\n      campusForm: [],\n      areaForm: [],\n      uploadEditForm: {\n        catId: \"-1\",\n        catAge: -1,\n        catName: \"-1\",\n        catRemark: \"-1\",\n        catSex: -1,\n        catStatus: \"-1\",\n        campusId: \"-1\",\n        areaId: -1,\n      },\n      addCatDialogVisible: false,\n    };\n  },\n  created() {\n    this.getCatList();\n    this.getAreaFormList();\n  },\n  methods: {\n    getLocalTime(nS) {\n      return new Date(parseInt(nS)).toLocaleString().replace(/:\\d{1,2}$/, \" \");\n    },\n    async getCatList() {\n      let { data: resp } = await this.$http.post(\n        \"/get_cat_information\",\n        this.queryInfo\n      );\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n        return;\n      }\n      this.catList = resp.data.u;\n      this.total = resp.data.v;\n    },\n    //监听pagesize改变\n    handleSizeChange(newPageSize) {\n      this.queryInfo.pageSize = newPageSize;\n      this.getCatList();\n    },\n    handleCurrentChange(newPageNum) {\n      this.queryInfo.pageNum = newPageNum - 1;\n      this.getCatList();\n    },\n    async getAreaFormList() {\n      let { data: resp } = await this.$http.post(\n        \"/manager_get_basic_info_list\"\n      );\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n        return;\n      }\n      this.campusForm = resp.data.campusList;\n    },\n    showEditDialog(row) {\n      this.editDialogVisible = true;\n      this.editForm = row;\n      this.editForm.campusId += \"\";\n      this.editForm.areaIdTemp = row.areaId;\n      this.editCampusChange(); //todo:提交时候别忘了如果为空\n      this.getEditPhotoAddr();\n\n      this.$forceUpdate();\n    },\n    async submitEditForm() {\n      if (!this.editForm.areaId)\n        this.editForm.areaId = this.editForm.areaIdTemp;\n      copyProperties(this.editForm, this.uploadEditForm);\n      this.$refs.uploadCatPictureRef.submit();\n      let { data: respForm } = await this.$http.post(\n        \"/manager_modify_cat_info\",\n        this.uploadEditForm\n      );\n      if (!respFilter(respForm)) {\n        this.$message.error(respForm.msg);\n        this.logout();\n        return;\n      }\n      this.$message.success(\"修改成功\");\n      this.editDialogVisible = false;\n      this.getCatList();\n    },\n    onChange(file) {\n      this.editForm.catPhotoSrc = URL.createObjectURL(file.raw);\n      this.getEditPhotoAddr();\n    },\n    getEditPhotoAddr() {\n      if (this.editForm.catPhotoSrc)\n        this.editForm.photoAddr = this.editForm.catPhotoSrc;\n      else\n        this.editForm.photoAddr =\n          `${config.Http.baseUrl}` +\n          \"image?imgId=\" +\n          `${this.editForm.catPhotoId}`;\n      this.$forceUpdate();\n    },\n    async editCampusChange() {\n      this.editForm.areaId = undefined;\n      await this.refreshAreaForm();\n    },\n    async refreshAreaForm() {\n      let { data: resp } = await this.$http.post(\n        \"/manager_get_basic_info_list_lazy_get_area\",\n        this.editForm.campusId\n      );\n      console.log(resp.data);\n      this.areaForm = resp.data;\n      this.areaForm.forEach((area) => {\n        area.campusId = area.campusId.split(\".\")[1];\n      });\n    },\n    editAreaChange() {\n      this.$forceUpdate();\n    },\n    showAddDialog() {\n      this.addCatDialogVisible = true;\n      this.editForm = {\n        catId: \"由后台自动生成\",\n        catAge: null,\n        catName: null,\n        catPhotoId: null,\n        catRemark: null,\n        catSex: null,\n        catStatus: null,\n        campusId: null,\n        areaId: null,\n        catPhotoSrc: null,\n        photoAddr: null,\n        areaIdTemp: null,\n      };\n    },\n    async submitAddForm() {\n      if (!this.editForm.areaId)\n        this.editForm.areaId = this.editForm.areaIdTemp;\n      copyProperties(this.editForm, this.uploadEditForm);\n      this.uploadEditForm.areaId=null;\n      let { data: respForm } = await this.$http.post(\n        \"/manager_add_cat_info\",\n        this.uploadEditForm\n      );\n      if (!respFilter(respForm)) {\n        this.$message.error(respForm.msg);\n        this.logout();\n        return;\n      }\n      this.$refs.uploadCatPictureRef.submit();\n      this.$message.success(\"修改成功\");\n      this.addCatDialogVisible = false;\n      this.getCatList();\n    },\n    async deleteCat(row){\n      let { data: resp } = await this.$http.post(\"/manager_delete_cat_info\",row.catId);\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n        return;\n      }\n      this.$message.success(\"删除成功\");\n      this.getCatList();\n    }\n  },\n};\n</script>\n\n<style scoped>\n.drawer-form {\n  width: 50%;\n  transform: translateX(50%);\n}\n.form-upload {\n  width: 10vw;\n  height: 100%;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.drawer-button-group {\n}\n</style>\n"]}]}