{"remainingRequest":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\normalUser\\CatCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\normalUser\\CatCard.vue","mtime":1633239546383},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1630488426857},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1630488426239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXNwRmlsdGVyIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9yZXNwRmlsdGVyIjsKaW1wb3J0IGNvbmZpZyBmcm9tICJAL2NvbmZpZyI7CmltcG9ydCBnZXRMb2NhbFRpbWUgZnJvbSAiQC9jb21wb25lbnRzL3V0aWxzL2dldExvY2FsVGltZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNhdENhcmQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXRJbmZvTGlzdDogbnVsbCwKICAgICAgc2VsZWN0ZWRDYXRJZDogIiIsCiAgICAgIHNlbGVjdGVkQ2F0OiBudWxsLAogICAgICB2aXNpYmlsaXR5OiB7CiAgICAgICAgcXVlc3Rpb246IGZhbHNlLAogICAgICB9LAogICAgICBmb3JtOiB7CiAgICAgICAgcXVlc3Rpb25Gb3JtOiB7CiAgICAgICAgICBxdWVzdGlvbkNhdGVnb3J5OiBudWxsLAogICAgICAgICAgcXVlc3Rpb25EZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgIHF1ZXN0aW9uUmVtYXJrOiBudWxsLAogICAgICAgIH0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaW5pdCgpIHsKICAgICAgbGV0IHsgZGF0YTogcmVzcCB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJnZXRfY2F0X2FwcGVhcmFuY2VfbGlzdCIpOwogICAgICBpZiAoIXJlc3BGaWx0ZXIocmVzcCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AubXNnKTsKICAgICAgICB0aGlzLmxvZ291dCgpOwogICAgICB9CiAgICAgIHRoaXMuY2F0SW5mb0xpc3QgPSByZXNwLmRhdGE7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2F0SW5mb0xpc3QpOwogICAgfSwKICAgIHNlbGVjdGVkQ2F0T25jaGFuZ2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRDYXQpOwogICAgICBsZXQgcmV0ID0gbnVsbDsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDYXRJZCkgewogICAgICAgIHRoaXMuY2F0SW5mb0xpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgaWYgKGl0ZW0uY2F0SWQgPT0gdGhpcy5zZWxlY3RlZENhdElkKSB7CiAgICAgICAgICAgIGxldCB1cmwgPQogICAgICAgICAgICAgIGAke2NvbmZpZy5IdHRwLmJhc2VVcmx9YCArICJpbWFnZT9pbWdJZD0iICsgYCR7aXRlbS5jYXRQaG90b0lkfWA7CiAgICAgICAgICAgIHJldCA9IGl0ZW07CiAgICAgICAgICAgIHJldC5pbWdVcmwgPSB1cmw7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDYXQgPSByZXQ7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLnNlbGVjdGVkQ2F0ID0gcmV0OwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSwKICAgIExvY2FsVGltZTogZnVuY3Rpb24gKG5zKSB7CiAgICAgIHJldHVybiBnZXRMb2NhbFRpbWUobnMpOwogICAgfSwKICAgIGdldEVkaXRQaG90b0FkZHIoY2F0UGhvdG9JZCkgewogICAgICBpZiAoIWNhdFBob3RvSWQpIGNhdFBob3RvSWQgPSAiMCI7CgogICAgICByZXR1cm4gYCR7Y29uZmlnLkh0dHAuYmFzZVVybH1gICsgImltYWdlP2ltZ0lkPSIgKyBgJHtjYXRQaG90b0lkfWA7CiAgICB9LAogICAgc2hvd1F1ZXN0aW9uRGlhbG9nKCkgewogICAgICB0aGlzLnZpc2liaWxpdHkucXVlc3Rpb24gPSB0cnVlOwogICAgICB0aGlzLmZvcm0ucXVlc3Rpb25Gb3JtLnF1ZXN0aW9uRGVzY3JpcHRpb24gPSBudWxsOwogICAgICB0aGlzLmZvcm0ucXVlc3Rpb25Gb3JtLnF1ZXN0aW9uQ2F0ZWdvcnkgPSBudWxsOwogICAgICB0aGlzLmZvcm0ucXVlc3Rpb25Gb3JtLnF1ZXN0aW9uUmVtYXJrID0gYGNhdE5hbWUgOiAke3RoaXMuc2VsZWN0ZWRDYXQuY2F0TmFtZX0sY2F0SWQgOiAke3RoaXMuc2VsZWN0ZWRDYXQuY2F0SWR9YDsKICAgIH0sCiAgICBhc3luYyBzdWJtaXRRdWVzdGlvbigpIHsKICAgICAgLy8gIHRvZG86IOS4iuS8oAogICAgICBsZXR7ZGF0YTpyZXNwfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgiL3F1ZXN0aW9uX3VwbG9hZCIsdGhpcy5mb3JtLnF1ZXN0aW9uRm9ybSk7CiAgICAgIGlmICghcmVzcEZpbHRlcihyZXNwKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5tc2cpOwogICAgICAgIHRoaXMubG9nb3V0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMudmlzaWJpbGl0eS5xdWVzdGlvbiA9IGZhbHNlOwogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaPkOS6pOaIkOWKnyIpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["CatCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CatCard.vue","sourceRoot":"src/components/normalUser","sourcesContent":["<template>\n  <div>\n    <main>\n      <el-select\n        v-model=\"selectedCatId\"\n        filterable\n        placeholder=\"请选择\"\n        @change=\"selectedCatOnchange\"\n      >\n        <el-option\n          v-for=\"cat in catInfoList\"\n          :key=\"cat.value\"\n          :label=\"cat.catName\"\n          :value=\"cat.catId\"\n        >\n        </el-option>\n      </el-select>\n      <div v-if=\"selectedCat\">\n        <div class=\"headImg\">\n          <img :src=\"getEditPhotoAddr(selectedCat.catPhotoId)\" alt=\"\" />\n        </div>\n        <div class=\"catName\">\n          <h1>{{ selectedCat.catName }}</h1>\n        </div>\n        <div class=\"moreInfo\">\n          <div class=\"span\">\n            <div class=\"chapter\">\n              <p class=\"title\">性别</p>\n              <p class=\"value\">{{ selectedCat.catSex == 0 ? \"公\" : \"母\" }}</p>\n            </div>\n            <div class=\"chapter\">\n              <p class=\"title\">猫猫状况</p>\n              <p class=\"value\">{{ selectedCat.catStatus }}</p>\n            </div>\n            <div class=\"chapter\">\n              <p class=\"title\">所属校区</p>\n              <p class=\"value\">{{ selectedCat.campusName }}</p>\n            </div>\n            <div class=\"chapter\">\n              <p class=\"title\">首次发现时间</p>\n              <p class=\"value\">{{ LocalTime(selectedCat.createTime) }}</p>\n            </div>\n          </div>\n          <div class=\"span\">\n            <div class=\"chapter\">\n              <p class=\"title\">年龄</p>\n              <p class=\"value\">{{ selectedCat.catAge }}</p>\n            </div>\n            <div class=\"chapter\">\n              <p class=\"title\">记录上次出现时间</p>\n              <p class=\"value\">{{ LocalTime(selectedCat.lastFindTime) }}</p>\n            </div>\n            <div class=\"chapter\">\n              <p class=\"title\">活动范围</p>\n              <p class=\"value\">{{ selectedCat.areaName }}</p>\n            </div>\n          </div>\n          <div class=\"max-width description\">\n            <div class=\"chapter\">\n              <p class=\"title\">备注</p>\n              <p class=\"value\">\n                {{ selectedCat.catRemark }}\n              </p>\n            </div>\n          </div>\n          <div class=\"question\">\n            <div>\n              <el-button type=\"info\" round @click=\"showQuestionDialog\"\n                >信息有问题?点我纠正</el-button\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n      <div v-else>\n        <h1>请选择你想查看的猫猫名称</h1>\n      </div>\n    </main>\n    <el-dialog title=\"提交问题\" :visible.sync=\"visibility.question\">\n      <el-form>\n        <el-form-item label=\"问题分类\" required>\n          <el-select v-model=\"form.questionForm.questionCategory\">\n            <el-option label=\"其他\" value=\"0\"></el-option>\n            <el-option label=\"猫咪信息有误\" value=\"1\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"问题描述\" required>\n          <el-input\n            type=\"textarea\"\n            :rows=\"5\"\n            placeholder=\"请输入内容\"\n            v-model=\"form.questionForm.questionDescription\"\n            maxlength=\"200\"\n            show-word-limit\n          />\n        </el-form-item>\n        <el-form-item label=\"问题备注\" required>\n          <el-input\n            type=\"textarea\"\n            :rows=\"1\"\n            placeholder=\"请输入内容\"\n            v-model=\"form.questionForm.questionRemark\"\n            maxlength=\"150\"\n            show-word-limit\n            disabled\n          />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"visibility.question = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitQuestion\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport respFilter from \"@/components/utils/respFilter\";\nimport config from \"@/config\";\nimport getLocalTime from \"@/components/utils/getLocalTime\";\n\nexport default {\n  name: \"CatCard\",\n  data() {\n    return {\n      catInfoList: null,\n      selectedCatId: \"\",\n      selectedCat: null,\n      visibility: {\n        question: false,\n      },\n      form: {\n        questionForm: {\n          questionCategory: null,\n          questionDescription: null,\n          questionRemark: null,\n        },\n      },\n    };\n  },\n  created() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      let { data: resp } = await this.$http.post(\"get_cat_appearance_list\");\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n      }\n      this.catInfoList = resp.data;\n      console.log(this.catInfoList);\n    },\n    selectedCatOnchange() {\n      console.log(this.selectedCat);\n      let ret = null;\n      if (this.selectedCatId) {\n        this.catInfoList.forEach((item) => {\n          if (item.catId == this.selectedCatId) {\n            let url =\n              `${config.Http.baseUrl}` + \"image?imgId=\" + `${item.catPhotoId}`;\n            ret = item;\n            ret.imgUrl = url;\n            this.selectedCat = ret;\n            return;\n          }\n        });\n        this.selectedCat = ret;\n        return;\n      }\n    },\n    LocalTime: function (ns) {\n      return getLocalTime(ns);\n    },\n    getEditPhotoAddr(catPhotoId) {\n      if (!catPhotoId) catPhotoId = \"0\";\n\n      return `${config.Http.baseUrl}` + \"image?imgId=\" + `${catPhotoId}`;\n    },\n    showQuestionDialog() {\n      this.visibility.question = true;\n      this.form.questionForm.questionDescription = null;\n      this.form.questionForm.questionCategory = null;\n      this.form.questionForm.questionRemark = `catName : ${this.selectedCat.catName},catId : ${this.selectedCat.catId}`;\n    },\n    async submitQuestion() {\n      //  todo: 上传\n      let{data:resp} = await this.$http.post(\"/question_upload\",this.form.questionForm);\n      if (!respFilter(resp)) {\n        this.$message.error(resp.msg);\n        this.logout();\n        return;\n      }\n      this.visibility.question = false;\n      this.$message.success(\"提交成功\");\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.headImg {\n  margin: 3vh 0;\n  box-sizing: border-box;\n  height: 27vh;\n  img {\n    height: 27vh;\n  }\n}\n.moreInfo {\n  margin-top: 2vh;\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  .chapter {\n    box-sizing: border-box;\n    border-left: #aaa solid 3px;\n    margin: 2vh 0 5vh 0;\n    p {\n      margin-left: 10px;\n    }\n    .title {\n      font-size: small;\n      color: #aaaaaa;\n    }\n    .value {\n      font-weight: bold;\n    }\n  }\n  .span {\n    margin-left: 5%;\n    width: 45%;\n  }\n  .max-width {\n    width: 100%;\n  }\n  .description {\n    box-sizing: border-box;\n    margin-top: 2vh;\n    margin-left: 5%;\n  }\n  .question {\n    width: 100%;\n    display: flex;\n    justify-content: center;\n  }\n}\n</style>\n"]}]}