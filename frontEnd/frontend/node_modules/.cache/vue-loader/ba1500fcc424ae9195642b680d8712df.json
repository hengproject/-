{"remainingRequest":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\superUser\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\src\\components\\superUser\\Users.vue","mtime":1631111986729},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1630488426857},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1630488426001},{"path":"C:\\DATA\\projects\\数据库实习\\frontEnd\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1630488426239}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gIOiOt+WPluWuouaIt+WIl+ihqOWPguaVsOWvueixoQogICAgICBxdWVyeUluZm86IHsKICAgICAgICBxdWVyeTogIiIsCiAgICAgICAgcGFnZU51bTogMCwKICAgICAgICBwYWdlU2l6ZTogMiwKICAgICAgfSwKICAgICAgcXVlcnlTdHJpbmc6ICIiLAogICAgICB1c2VyTGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBhZGREaWFsb2dWaXNpYmxlOiB0cnVlLAogICAgICAvLyDmt7vliqDnlKjmiLfnmoTooajljZXnsbvlnosKICAgICAgYWRkRm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgdXNlckdyb3VwOiAiIiwKICAgICAgICBzdGFmZk5hbWU6ICIiLAogICAgICAgIHN0YWZmSWRlbnRpdHk6ICIiLAogICAgICB9LAogICAgICBhZGRGb3JtUnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeeUqOaIt+WQjSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgeyBtaW46IDQsIG1heDogMzAsIG1lc3NhZ2U6ICLplb/luqblnKg0LTMw5LmL6Ze0IiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgeyBtaW46IDYsIG1heDogMzAsIG1lc3NhZ2U6ICLplb/luqblnKg2LTMw5LmL6Ze0IiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0VXNlckxpc3QoKSB7CiAgICAgIGxldCB7IGRhdGE6IHJlc3AgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgKICAgICAgICAiL3N1cGVydXNlcl9nZXRVc2VyTGlzdCIsCiAgICAgICAgdGhpcy5xdWVyeUluZm8KICAgICAgKTsKICAgICAgaWYgKHJlc3AuY29kZSA9PT0gNDAzIHx8IHJlc3AuY29kZSA9PT0gNDAxKQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZGF0YS5tc2cpOwogICAgICBpZiAocmVzcC5jb2RlID09PSAyMDApIHsKICAgICAgICB0aGlzLnVzZXJMaXN0ID0gcmVzcC5kYXRhLnU7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AuZGF0YS52LnVzZXJOdW07CiAgICAgIH0KICAgIH0sCiAgICBnZXRVc2VyTGlzdExpa2UoKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnF1ZXJ5ID0gdGhpcy5xdWVyeVN0cmluZzsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZU51bSA9IDA7CiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsKICAgIH0sCiAgICAvL+ebkeWQrHBhZ2VzaXpl5pS55Y+YCiAgICBoYW5kbGVTaXplQ2hhbmdlKG5ld1BhZ2VTaXplKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gbmV3UGFnZVNpemU7CiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2VOdW0pIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZU51bSA9IG5ld1BhZ2VOdW0gLSAxOwogICAgICB0aGlzLmdldFVzZXJMaXN0KCk7CiAgICB9LAogICAgLy/nm5HlkKxzd2l0Y2jnirbmgIHlvIDlhbPnirbmgIHnmoTmlLnlj5gKICAgIGFzeW5jIHVzZXJTdGFnZUNoYW5nZSh1c2VySW5mbykgewogICAgICBsZXQgeyBkYXRhOiByZXNwIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoIi9zdXBlcnVzZXJfbG9naW5fb3JfbG9nb3V0IiwgewogICAgICAgIHVzZXJEdG86IHVzZXJJbmZvLnVzZXJEdG8sCiAgICAgICAgb25saW5lOiB1c2VySW5mby5vbmxpbmUsCiAgICAgIH0pOwogICAgICBpZiAocmVzcC5jb2RlID09PSA0MDMgfHwgcmVzcC5jb2RlID09PSA0MDEpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3AuZGF0YS5tc2cpOwogICAgICAgIHJldHVybiB0aGlzLmxvZ291dCgpOwogICAgICB9CiAgICAgIGlmIChyZXNwLmNvZGUgPT09IDIwMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVEaWFsb2dDbG9zZSgpIHsKICAgICAgdGhpcy5hZGREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgYWRkRm9ybVN1Ym1pdCgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5hZGRGb3JtKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCIvc3VwZXJ1c2VyX2FkZF91c2VyIix0aGlzLmFkZEZvcm0pOwogICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBjbG9zZUFkZEZvcm0oKXsKICAgICAgdGhpcy5jbGVhckFkZEZvcm0oKTsKICAgICAgdGhpcy5hZGREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgY2xlYXJBZGRGb3JtKCl7CiAgICAgIHRoaXMuYWRkRm9ybT17CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICB1c2VyR3JvdXA6ICIiLAogICAgICAgIHN0YWZmTmFtZTogIiIsCiAgICAgICAgc3RhZmZJZGVudGl0eTogIiIsCiAgICAgIH07CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/components/superUser","sourcesContent":["<template>\n  <div>\n    <!--  面包屑导航区-->\n    <el-breadcrumb separator=\"/\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>超级用户菜单</el-breadcrumb-item>\n      <el-breadcrumb-item>修改用户信息</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!--    卡片视图区域-->\n    <el-card>\n      <!--        搜索与添加区域-->\n      <el-row :gutter=\"20\">\n        <el-col :span=\"7\">\n          <el-input placeholder=\"请输入内容\" v-model=\"queryString\" clearable>\n            <el-button\n              slot=\"append\"\n              icon=\"el-icon-search\"\n              @click=\"getUserListLike\"\n            ></el-button>\n          </el-input>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\"\n            >添加用户</el-button\n          >\n        </el-col>\n      </el-row>\n      <el-table :data=\"userList\" border stripe>\n        <el-table-column label=\"#\" type=\"index\" align=\"center\">\n        </el-table-column>\n\n        <el-table-column label=\"用户管理\" align=\"center\">\n          <el-table-column\n            label=\"用户ID\"\n            prop=\"userLogin.userId\"\n          ></el-table-column>\n          <el-table-column\n            label=\"用户名称\"\n            prop=\"userLogin.username\"\n          ></el-table-column>\n          <el-table-column\n            label=\"用户密码\"\n            prop=\"userLogin.password\"\n          ></el-table-column>\n          <el-table-column\n            label=\"用户组\"\n            prop=\"userDto.userGroupEnum\"\n          ></el-table-column>\n        </el-table-column>\n\n        <el-table-column label=\"操作员管理\" align=\"center\">\n          <el-table-column\n            label=\"操作员ID\"\n            prop=\"staffDto.staffId\"\n          ></el-table-column>\n          <el-table-column\n            label=\"操作员姓名\"\n            prop=\"staffDto.staffName\"\n          ></el-table-column>\n          <el-table-column\n            label=\"操作员类别\"\n            prop=\"staffDto.staffIdentityEnum\"\n          ></el-table-column>\n        </el-table-column>\n        <el-table-column label=\"具体操作\" align=\"center\">\n          <el-table-column label=\"在线状态\">\n            <template slot-scope=\"scope\">\n              <el-switch\n                v-model=\"scope.row.online\"\n                @change=\"userStageChange(scope.row)\"\n              ></el-switch>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\">\n            <template slot-scope=\"\">\n              <el-button-group>\n                <el-tooltip\n                  class=\"item\"\n                  effect=\"dark\"\n                  content=\"修改用户信息\"\n                  placement=\"top\"\n                  :enterable=\"false\"\n                >\n                  <el-button\n                    type=\"primary\"\n                    icon=\"el-icon-edit\"\n                    size=\"mini\"\n                  ></el-button\n                ></el-tooltip>\n                <el-tooltip\n                  class=\"item\"\n                  effect=\"dark\"\n                  content=\"删除该用户(包括员工信息)\"\n                  placement=\"top\"\n                  :enterable=\"false\"\n                >\n                  <el-button\n                    type=\"danger\"\n                    icon=\"el-icon-delete\"\n                    size=\"mini\"\n                  ></el-button\n                ></el-tooltip>\n              </el-button-group>\n            </template>\n          </el-table-column>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"queryInfo.pageNum + 1\"\n        :page-sizes=\"[2, 3, 5, 10]\"\n        :page-size=\"queryInfo.pageSize\"\n        :total=\"total\"\n        layout=\"total,sizes, prev, pager, next, jumper\"\n      >\n      </el-pagination>\n    </el-card>\n\n    <!--    添加用户对话框-->\n    <el-dialog\n      title=\"添加用户\"\n      :visible.sync=\"addDialogVisible\"\n      width=\"30%\"\n      :before-close=\"handleDialogClose\"\n    >\n      <!--      内容主题区-->\n\n      <el-form :model=\"addForm\" ref=\"addFormRef\" :rules=\"addFormRules\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input\n            v-model=\"addForm.username\"\n            placeholder=\"请输入用户名\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户密码\" prop=\"password\">\n          <el-input\n            v-model=\"addForm.password\"\n            show-password\n            placeholder=\"请输入密码\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"用户组\" prop=\"userGroup\">\n          <el-select v-model=\"addForm.userGroup\">\n            <el-option label=\"普通用户\" value=\"NORMAL_USER\"></el-option>\n            <el-option label=\"超级用户\" value=\"SUPER_USER\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"操作员姓名\" prop=\"staffName\">\n          <el-input\n            v-model=\"addForm.staffName\"\n            placeholder=\"请输入操作员姓名\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"操作员类别\" prop=\"userGroup\">\n          <el-select v-model=\"addForm.staffIdentity\">\n            <el-option label=\"普通用户\" value=\"NORMAL_USER\"></el-option>\n            <el-option label=\"管理员\" value=\"MANAGER\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeAddForm\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addFormSubmit\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      //  获取客户列表参数对象\n      queryInfo: {\n        query: \"\",\n        pageNum: 0,\n        pageSize: 2,\n      },\n      queryString: \"\",\n      userList: [],\n      total: 0,\n      addDialogVisible: true,\n      // 添加用户的表单类型\n      addForm: {\n        username: \"\",\n        password: \"\",\n        userGroup: \"\",\n        staffName: \"\",\n        staffIdentity: \"\",\n      },\n      addFormRules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          { min: 4, max: 30, message: \"长度在4-30之间\", trigger: \"blur\" },\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          { min: 6, max: 30, message: \"长度在6-30之间\", trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  created() {\n    this.getUserList();\n  },\n  methods: {\n    async getUserList() {\n      let { data: resp } = await this.$http.post(\n        \"/superuser_getUserList\",\n        this.queryInfo\n      );\n      if (resp.code === 403 || resp.code === 401)\n        return this.$message.error(resp.data.msg);\n      if (resp.code === 200) {\n        this.userList = resp.data.u;\n        this.total = resp.data.v.userNum;\n      }\n    },\n    getUserListLike() {\n      this.queryInfo.query = this.queryString;\n      this.queryInfo.pageNum = 0;\n      this.getUserList();\n    },\n    //监听pagesize改变\n    handleSizeChange(newPageSize) {\n      this.queryInfo.pageSize = newPageSize;\n      this.getUserList();\n    },\n    handleCurrentChange(newPageNum) {\n      this.queryInfo.pageNum = newPageNum - 1;\n      this.getUserList();\n    },\n    //监听switch状态开关状态的改变\n    async userStageChange(userInfo) {\n      let { data: resp } = await this.$http.post(\"/superuser_login_or_logout\", {\n        userDto: userInfo.userDto,\n        online: userInfo.online,\n      });\n      if (resp.code === 403 || resp.code === 401) {\n        this.$message.error(resp.data.msg);\n        return this.logout();\n      }\n      if (resp.code === 200) {\n        this.$message.success(\"修改成功\");\n      }\n    },\n    handleDialogClose() {\n      this.addDialogVisible = false;\n    },\n    addFormSubmit() {\n      console.log(this.addForm);\n      this.$http.post(\"/superuser_add_user\",this.addForm);\n      this.addDialogVisible = false;\n    },\n    closeAddForm(){\n      this.clearAddForm();\n      this.addDialogVisible = false;\n    },\n    clearAddForm(){\n      this.addForm={\n        username: \"\",\n        password: \"\",\n        userGroup: \"\",\n        staffName: \"\",\n        staffIdentity: \"\",\n      };\n    }\n  },\n};\n</script>\n\n<style scoped>\n.el-button-group {\n  display: flex;\n  justify-content: space-between;\n}\n</style>\n"]}]}